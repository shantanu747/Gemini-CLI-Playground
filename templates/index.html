{% extends 'base.html' %}

{% block content %}
    <div class="container">
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Status</th>
                        <th>Report Date</th>
                        <th>Completion Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for bug in bugs %}
                    <tr>
                        <td>{{ bug.title }}</td>
                        <td>
                            <form action="{{ url_for('update_status', bug_id=bug.id) }}" method="post" class="status-form">
                                <select name="status" onchange="this.form.submit()">
                                    <option value="To Do" {% if bug.status == 'To Do' %}selected{% endif %}>To Do</option>
                                    <option value="In Progress" {% if bug.status == 'In Progress' %}selected{% endif %}>In Progress</option>
                                    <option value="Done" {% if bug.status == 'Done' %}selected{% endif %}>Done</option>
                                </select>
                            </form>
                        </td>
                        <td>{{ bug.report_date.strftime('%Y-%m-%d') }}</td>
                        <td>{{ bug.completion_date.strftime('%Y-%m-%d') if bug.completion_date else 'N/A' }}</td>
                        <td class="actions">
                            <a href="{{ url_for('edit_bug', bug_id=bug.id) }}" class="btn btn-edit">Edit</a>
                            <form action="{{ url_for('delete_bug', bug_id=bug.id) }}" method="post" style="display:inline;">
                                <button type="submit" class="btn btn-delete">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <a href="{{ url_for('create_bug') }}" class="fab">+</a>
    </div>
{% endblock %}
